<!DOCTYPE html>

<head>
    <title>Sample Service Worker</title>
</head>

<body>
    <script>
        if ('serviceWorker' in navigator) {
            const scope = location.pathname.replace(/\/[^\/]+$/, '/');
            navigator.serviceWorker.register('wayne-service-worker.js', { scope, type: 'module' })
                .then(function (reg) {
                    reg.addEventListener('updatefound', function () {
                        const installingWorker = reg.installing;
                        console.log('A new service worker is being installed:',
                            installingWorker);
                    });
                    // registration worked
                    console.log('Registration succeeded. Scope is ' + reg.scope);
                }).catch(function (error) {
                    // registration failed
                    console.log('Registration failed with ' + error);
                });
        }
    </script>
</body>
